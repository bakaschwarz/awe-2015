%h1.centered-title Dashboard
.filter_container
  -filter_from = Time.now - 2.hours
  -filter_to = Time.now
  .input-group.filter_group
    %span.input-group-addon.filter_label#from= "from:"
    %input.form-control#filter_von{type: "text", placeholder: filter_from.to_formatted_s(:db), "aria-describedby" => "from"}
  .input-group.filter_group
    %span.input-group-addon.filter_label#to= "to:"
    %input.form-control#filter_bis{type: "text", placeholder: filter_to.to_formatted_s(:db), "aria-describedby" => "to"}
  %a.btn.btn-primary= "Filter"
%div.panel-group#accordion
  -@station_hash = ordered_timestamps_for_stations({from: filter_from.to_i, to: filter_to.to_i})
  -@station_hash.each_with_index do |(station, time_stamp_hash), index|
    -@station = station
    -@time_stamp_hash = time_stamp_hash
    %div.panel.panel-default
      %div.panel-heading
        %h2.panel-title
          %a{"data-toggle" => "collapse", "data-parent" => "#accordion", href: "#collapse#{station.id}"}
            = station.label
      %div{id: "collapse#{station.id}", class: "panel-collapse collapse"}
        %div.panel-body
          =render 'sensor_charts'
          %table.table.table-striped.dashboard-table.table-bordered
            %tr
              %th= "Time Stamp"
              -station.sensors.each do |sensor|
                %th
                  = sensor.label
                  = "["
                  = sensor.unit
                  = "]"
            -time_stamp_hash.each_pair do |time_stamp, value_hash|
              %tr
                %td= Time.at(time_stamp).to_formatted_s(:db)
                -station.sensors.each do |sensor|
                  %td
                    -if value_hash[sensor.id] == nil
                      = "N/A"
                    -else
                      = value_hash[sensor.id]
